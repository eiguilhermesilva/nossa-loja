<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Precificação - BeautyStore</title>
    <link rel="stylesheet" href="../../style.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="sidebar">
        <div class="logo">
            <i class="fas fa-palette"></i>
            <h2>BeautyStore</h2>
        </div>
        
        <nav class="menu">
            <a href="../../index.html" class="menu-item">
                <i class="fas fa-home"></i> Dashboard
            </a>
            <a href="index.html" class="menu-item active">
                <i class="fas fa-calculator"></i> Precificação
            </a>
            <a href="../produtos/index.html" class="menu-item">
                <i class="fas fa-box"></i> Produtos
            </a>
            <a href="../estoque/index.html" class="menu-item">
                <i class="fas fa-warehouse"></i> Estoque
            </a>
            <a href="../vendas/index.html" class="menu-item">
                <i class="fas fa-shopping-cart"></i> Vendas
            </a>
            <a href="../relatorios/index.html" class="menu-item">
                <i class="fas fa-chart-bar"></i> Relatórios
            </a>
        </nav>
    </div>

    <div class="main-content">
        <header class="topbar">
            <div class="search-bar">
                <i class="fas fa-search"></i>
                <input type="text" placeholder="Buscar produto para precificar...">
            </div>
            <div class="header-actions">
                <button class="btn-help" onclick="showNotification('Clique em um produto para precificá-lo', 'info')">
                    <i class="fas fa-question-circle"></i>
                </button>
            </div>
        </header>

        <div class="content">
            <div class="page-header">
                <h1><i class="fas fa-calculator"></i> Precificação de Produtos</h1>
                <p>Calcule o preço de venda ideal para seus produtos de maquiagem e skincare</p>
            </div>

            <div class="precificacao-container">
                <div class="precificacao-left">
                    <div class="product-selection">
                        <h3><i class="fas fa-box-open"></i> Selecionar Produto</h3>
                        <div class="search-product">
                            <input type="text" id="search-product" placeholder="Digite o nome do produto...">
                            <button onclick="searchProducts()"><i class="fas fa-search"></i></button>
                        </div>
                        <div class="product-list" id="product-list">
                            <!-- Produtos serão carregados via JavaScript -->
                        </div>
                    </div>
                </div>

                <div class="precificacao-right">
                    <div class="calculadora-container">
                        <h3><i class="fas fa-calculator"></i> Calculadora de Precificação</h3>
                        
                        <div class="selected-product" id="selected-product-info">
                            <p>Selecione um produto para começar</p>
                        </div>

                        <div class="calculadora-form">
                            <div class="form-section">
                                <h4>1. Custo de Aquisição</h4>
                                <div class="input-group">
                                    <label>Custo do Produto (R$):</label>
                                    <input type="number" id="custo-produto" step="0.01" min="0" placeholder="0,00">
                                </div>
                                <div class="input-group">
                                    <label>Frete (R$):</label>
                                    <input type="number" id="frete" step="0.01" min="0" placeholder="0,00">
                                </div>
                                <div class="input-group">
                                    <label>Outros Custos (R$):</label>
                                    <input type="number" id="outros-custos" step="0.01" min="0" placeholder="0,00">
                                </div>
                            </div>

                            <div class="form-section">
                                <h4>2. Custo Operacional</h4>
                                <div class="input-group">
                                    <label>Despesas Mensais da Loja (R$):</label>
                                    <input type="number" id="despesas-mensais" step="0.01" min="0" value="4000">
                                </div>
                                <div class="input-group">
                                    <label>Produtos Vendidos por Mês:</label>
                                    <input type="number" id="vendas-mensais" min="1" value="200">
                                </div>
                            </div>

                            <div class="form-section">
                                <h4>3. Taxas e Impostos</h4>
                                <div class="input-group">
                                    <label>Taxa de Cartão (%):</label>
                                    <input type="number" id="taxa-cartao" step="0.1" min="0" max="20" value="3.5">
                                </div>
                                <div class="input-group">
                                    <label>Impostos (%):</label>
                                    <input type="number" id="imposto" step="0.1" min="0" max="30" value="6">
                                </div>
                            </div>

                            <div class="form-section">
                                <h4>4. Margem de Lucro</h4>
                                <div class="input-group">
                                    <label>Margem Desejada (%):</label>
                                    <input type="number" id="margem" step="0.1" min="0" max="100" value="40">
                                </div>
                            </div>

                            <button class="btn-calcular" onclick="calcularPrecificacao()">
                                <i class="fas fa-calculator"></i> Calcular Preço de Venda
                            </button>
                        </div>
                    </div>

                    <div class="resultado-container" id="resultado-container" style="display: none;">
                        <h3><i class="fas fa-chart-line"></i> Resultado da Precificação</h3>
                        
                        <div class="resultado-grid">
                            <div class="resultado-item">
                                <span class="resultado-label">Custo de Compra (CC):</span>
                                <span class="resultado-valor" id="resultado-cc">R$ 0,00</span>
                            </div>
                            <div class="resultado-item">
                                <span class="resultado-label">Custo Operacional (CO):</span>
                                <span class="resultado-valor" id="resultado-co">R$ 0,00</span>
                            </div>
                            <div class="resultado-item resultado-destaque">
                                <span class="resultado-label">CMV:</span>
                                <span class="resultado-valor" id="resultado-cmv">R$ 0,00</span>
                            </div>
                            <div class="resultado-item">
                                <span class="resultado-label">Markup:</span>
                                <span class="resultado-valor" id="resultado-markup">0,00</span>
                            </div>
                            <div class="resultado-item resultado-principal">
                                <span class="resultado-label">Preço de Venda Sugerido:</span>
                                <span class="resultado-valor" id="resultado-pv">R$ 0,00</span>
                            </div>
                            <div class="resultado-item">
                                <span class="resultado-label">Margem Real:</span>
                                <span class="resultado-valor" id="resultado-margem-real">0%</span>
                            </div>
                        </div>

                        <div class="resultado-actions">
                            <button class="btn-salvar" onclick="salvarPrecificacao()">
                                <i class="fas fa-save"></i> Salvar no Produto
                            </button>
                            <button class="btn-compartilhar" onclick="compartilharResultado()">
                                <i class="fas fa-share-alt"></i> Compartilhar
                            </button>
                            <button class="btn-imprimir" onclick="imprimirResultado()">
                                <i class="fas fa-print"></i> Imprimir
                            </button>
                        </div>

                        <div class="dica-precificacao">
                            <h4><i class="fas fa-lightbulb"></i> Dica de Precificação</h4>
                            <p>Para produtos de maquiagem e skincare, considere:</p>
                            <ul>
                                <li>Verifique os preços da concorrência</li>
                                <li>Considere a percepção de valor da marca</li>
                                <li>Produtos premium podem ter margens maiores</li>
                                <li>Produtos de entrada podem ter margens menores para atrair clientes</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="historico-precificacao">
                <h3><i class="fas fa-history"></i> Histórico de Precificações</h3>
                <table id="historico-table">
                    <thead>
                        <tr>
                            <th>Data</th>
                            <th>Produto</th>
                            <th>Custo</th>
                            <th>Preço Sugerido</th>
                            <th>Margem</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody id="historico-body">
                        <!-- Histórico será carregado via JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script src="../../config/database.js"></script>
</body>
</html>